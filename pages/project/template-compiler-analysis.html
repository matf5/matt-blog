<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深度解析：一个轻量级JavaScript模板编译引擎的实现 | matt的前端之路</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/matt-blog/cainiao.jpg">
    <meta name="description" content="matt的前端之路">
    
    <link rel="preload" href="/matt-blog/assets/css/0.styles.67df34d8.css" as="style"><link rel="preload" href="/matt-blog/assets/js/app.5d95d86b.js" as="script"><link rel="preload" href="/matt-blog/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/matt-blog/assets/js/1.f8bb34da.js" as="script"><link rel="preload" href="/matt-blog/assets/js/29.6e123920.js" as="script"><link rel="prefetch" href="/matt-blog/assets/js/10.fde088a2.js"><link rel="prefetch" href="/matt-blog/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/matt-blog/assets/js/12.27d4f152.js"><link rel="prefetch" href="/matt-blog/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/matt-blog/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/matt-blog/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/matt-blog/assets/js/16.85253907.js"><link rel="prefetch" href="/matt-blog/assets/js/17.c2838453.js"><link rel="prefetch" href="/matt-blog/assets/js/18.3256f17f.js"><link rel="prefetch" href="/matt-blog/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/matt-blog/assets/js/20.0d880388.js"><link rel="prefetch" href="/matt-blog/assets/js/21.33b300c9.js"><link rel="prefetch" href="/matt-blog/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/matt-blog/assets/js/23.4db98f57.js"><link rel="prefetch" href="/matt-blog/assets/js/24.d02ac95a.js"><link rel="prefetch" href="/matt-blog/assets/js/25.2773990a.js"><link rel="prefetch" href="/matt-blog/assets/js/26.3f9a83a0.js"><link rel="prefetch" href="/matt-blog/assets/js/27.76956e48.js"><link rel="prefetch" href="/matt-blog/assets/js/28.a1a2f2a8.js"><link rel="prefetch" href="/matt-blog/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/matt-blog/assets/js/30.caa352c9.js"><link rel="prefetch" href="/matt-blog/assets/js/31.1d76566f.js"><link rel="prefetch" href="/matt-blog/assets/js/32.c4bb4de8.js"><link rel="prefetch" href="/matt-blog/assets/js/33.39437f0e.js"><link rel="prefetch" href="/matt-blog/assets/js/34.aeff76a3.js"><link rel="prefetch" href="/matt-blog/assets/js/35.eff53b64.js"><link rel="prefetch" href="/matt-blog/assets/js/36.82f9ebe4.js"><link rel="prefetch" href="/matt-blog/assets/js/37.159089ca.js"><link rel="prefetch" href="/matt-blog/assets/js/38.7b02d561.js"><link rel="prefetch" href="/matt-blog/assets/js/39.aad63f87.js"><link rel="prefetch" href="/matt-blog/assets/js/4.45665f8a.js"><link rel="prefetch" href="/matt-blog/assets/js/40.55886bac.js"><link rel="prefetch" href="/matt-blog/assets/js/41.2a8e9d15.js"><link rel="prefetch" href="/matt-blog/assets/js/42.a714b810.js"><link rel="prefetch" href="/matt-blog/assets/js/43.10b4130b.js"><link rel="prefetch" href="/matt-blog/assets/js/44.55b42df6.js"><link rel="prefetch" href="/matt-blog/assets/js/45.96e83476.js"><link rel="prefetch" href="/matt-blog/assets/js/46.78bc5c37.js"><link rel="prefetch" href="/matt-blog/assets/js/47.1fcb8069.js"><link rel="prefetch" href="/matt-blog/assets/js/48.eccb93b8.js"><link rel="prefetch" href="/matt-blog/assets/js/49.2974f0ce.js"><link rel="prefetch" href="/matt-blog/assets/js/5.7098d77a.js"><link rel="prefetch" href="/matt-blog/assets/js/50.3dee0a22.js"><link rel="prefetch" href="/matt-blog/assets/js/51.d1c6fe7e.js"><link rel="prefetch" href="/matt-blog/assets/js/52.0e6ae343.js"><link rel="prefetch" href="/matt-blog/assets/js/53.093f95eb.js"><link rel="prefetch" href="/matt-blog/assets/js/54.7b48c16a.js"><link rel="prefetch" href="/matt-blog/assets/js/55.783c32bb.js"><link rel="prefetch" href="/matt-blog/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/matt-blog/assets/js/7.6a854e57.js"><link rel="prefetch" href="/matt-blog/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/matt-blog/assets/css/0.styles.67df34d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matt-blog/" class="home-link router-link-active"><img src="/matt-blog/cainiao.jpg" alt="matt的前端之路" class="logo"> <span class="site-name can-hide">matt的前端之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hybrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mini-program</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>performance</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目经验剖析</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matt-blog/pages/project/file-upload-deep-dive.html" class="sidebar-link">深入探索文件上传：从组件设计到断点续传</a></li><li><a href="/matt-blog/pages/project/interview-preparation.html" class="sidebar-link">项目经验剖析：面试准备指南</a></li><li><a href="/matt-blog/pages/project/template-compiler-analysis.html" aria-current="page" class="active sidebar-link">template-compiler-analysis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matt-blog/pages/project/template-compiler-analysis.html#核心思想-编译优于解释" class="sidebar-link">核心思想：编译优于解释</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/project/template-compiler-analysis.html#源码与执行流程详解" class="sidebar-link">源码与执行流程详解</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/project/template-compiler-analysis.html#设计亮点总结" class="sidebar-link">设计亮点总结</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>qwik</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>xiaochengxu</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>在现代前端开发中，我们常常需要处理动态渲染的场景。无论是基于后台下发的配置动态生成页面，还是在客户端根据状态渲染不同的UI，我们都需要一个高效的机制来将数据（通常是JSON格式）转换成最终的视图。</p> <p>传统的“解释执行”模型，即在运行时递归遍历JSON树并创建DOM节点，虽然直观，但在复杂或频繁渲染的场景下可能会遇到性能瓶颈。本文将深度解析一段设计精巧的代码，它实现了一个轻量级的 <strong>模板编译引擎</strong>，通过 <strong>“编译优于解释”</strong> 的思想，将描述UI的JSON对象在运行时动态编译成一个高效的可执行渲染函数，从而获得极致的性能。</p> <h2 id="核心思想-编译优于解释"><a href="#核心思想-编译优于解释" class="header-anchor">#</a> 核心思想：编译优于解释</h2> <p>这段代码的核心思路与Vue、Svelte等现代框架的编译思想一脉相承，但更为轻量和专注。其精髓在于：</p> <ol><li><strong>一次性编译 (One-time Compilation)</strong>：它只遍历一次描述UI的JSON树，但目的不是为了直接渲染，而是为了 <strong>生成一段高度优化的JavaScript代码字符串</strong>。</li> <li><strong>创建高效函数 (Function Creation)</strong>：它利用 <code>new Function()</code> 这个强大的特性，将上一步生成的代码字符串转换成一个真正的、可被V8引擎优化的原生JavaScript函数。</li> <li><strong>重复执行 (Reusable Execution)</strong>：之后每当需要重新渲染时，我们只需直接执行这个已经被编译好的函数即可，完全避免了递归遍历的开销，性能表现非常出色。</li></ol> <h2 id="源码与执行流程详解"><a href="#源码与执行流程详解" class="header-anchor">#</a> 源码与执行流程详解</h2> <p>让我们从入口函数 <code>createParser</code> 开始，一步步探寻这个编译引擎是如何工作的。</p> <h3 id="源码"><a href="#源码" class="header-anchor">#</a> 源码</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/* eslint-disable @typescript-eslint/no-use-before-define */</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ContainerElement<span class="token punctuation">,</span> Element <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./types'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./addons/getTemplate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> forAliasRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.*?)\s+(?:in|of)\s+(.*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> forIteratorRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\((\{[^}]*\}|[^,]*),([^,]*)(?:,([^,]*))?\)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> DynamicPrefix <span class="token operator">=</span> <span class="token string">':'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ProcessedEach</span> <span class="token punctuation">{</span>
  exp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  alias<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// shadow merge if the dynamic value is plain object</span>
<span class="token keyword">function</span> <span class="token function">shouldShadowMerge</span><span class="token punctuation">(</span>dynamicValue<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token keyword">typeof</span> dynamicValue <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>dynamicValue<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    dynamicValue <span class="token operator">!==</span> <span class="token keyword">null</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isDynamicProp</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prop<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>DynamicPrefix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">processEach</span><span class="token punctuation">(</span>each<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> ProcessedEach <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inMatch <span class="token operator">=</span> each<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>forAliasRE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inMatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid each expression: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>each<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> res<span class="token operator">:</span> ProcessedEach <span class="token operator">=</span> <span class="token punctuation">{</span>
    exp<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    index<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span>exp <span class="token operator">=</span> inMatch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> alias <span class="token operator">=</span> inMatch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> iteratorMatch <span class="token operator">=</span> alias<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>forIteratorRE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>iteratorMatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span>alias <span class="token operator">=</span> iteratorMatch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span>index <span class="token operator">=</span> iteratorMatch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span>alias <span class="token operator">=</span> alias<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">genEach</span><span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> each <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> exp<span class="token punctuation">,</span> alias<span class="token punctuation">,</span> index <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">processEach</span><span class="token punctuation">(</span>each <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>element <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eachProcessed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> element<span class="token punctuation">.</span>each<span class="token punctuation">;</span>
  <span class="token keyword">const</span> indexParam <span class="token operator">=</span> index <span class="token operator">!==</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_l(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>exp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, function (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>alias<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>indexParam<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) {
    return </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">codegen</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
  })</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">genShow</span><span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> show <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">(</span>element <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showProcessed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> element<span class="token punctuation">.</span>show<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>show<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &amp;&amp; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">codegen</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">genElement</span><span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> expression<span class="token punctuation">,</span> value<span class="token operator">:</span> defaultValue <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> element <span class="token keyword">as</span> ContainerElement<span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token operator">!</span>expression
    <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>defaultValue <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>defaultValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">''</span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">:</span> expression<span class="token punctuation">;</span>

  <span class="token keyword">const</span> props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dynamicProps <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isDynamicProp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dynamicPropsStatement <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dynamicProps
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">prop</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dynamicValue <span class="token operator">=</span> element<span class="token punctuation">[</span>prop <span class="token keyword">as</span> <span class="token keyword">keyof</span> Element<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> dynamicValue <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dynamicValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token comment">// filter dynamic props in element</span>
  <span class="token keyword">const</span> computedElement <span class="token operator">=</span> props
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>prop <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token function">isDynamicProp</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>res<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token operator">:</span> element<span class="token punctuation">[</span>prop <span class="token keyword">as</span> <span class="token keyword">keyof</span> Element<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Element<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_h(_m(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>
    computedElement<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dynamicPropsStatement<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">), </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, _f([</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">codegen</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]))</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">codegen</span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> each<span class="token punctuation">,</span> show <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>each <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>element <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eachProcessed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">genEach</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>show <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>element <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showProcessed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">genShow</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">genElement</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createParser</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> children<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  debug<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>element<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> assignStatements <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const {</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">} = params;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>assignStatements<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        return </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">codegen</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">/* istanbul ignore else */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>debug<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'==== template parser debug ===='</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> render <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Function</span></span><span class="token punctuation">(</span><span class="token string">'params'</span><span class="token punctuation">,</span> <span class="token string">'_h'</span><span class="token punctuation">,</span> <span class="token string">'_l'</span><span class="token punctuation">,</span> <span class="token string">'_m'</span><span class="token punctuation">,</span> <span class="token string">'_f'</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">eachHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">mergeDynamicProps</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>origin<span class="token operator">:</span> Element<span class="token punctuation">,</span> patch<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>patch<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token keyword">keyof</span> Element<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>prop<span class="token operator">:</span> <span class="token keyword">keyof</span> Element<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldShadowMerge</span><span class="token punctuation">(</span>patch<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            origin<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> origin<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            origin<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> origin<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">,</span> patch<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            origin<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> patch<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> origin<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">filterList</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// the same as list.flat(1)</span>
      <span class="token comment">// eslint-disable-next-line prefer-spread</span>
      <span class="token keyword">const</span> flattenList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> flattenList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">render</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> eachHandler<span class="token punctuation">,</span> mergeDynamicProps<span class="token punctuation">,</span> filterList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="流程拆解"><a href="#流程拆解" class="header-anchor">#</a> 流程拆解</h3> <h4 id="_1-createparser-handler-准备工作台"><a href="#_1-createparser-handler-准备工作台" class="header-anchor">#</a> 1. <code>createParser(handler)</code> - 准备工作台</h4> <p>一切始于 <code>createParser</code>。你调用它并传入一个 <code>handler</code> 函数。这个 <code>handler</code> 函数是最终的“工人”，它知道如何根据解析结果创建出你想要的视图单元（例如Vue的VNode或React的Element）。<code>createParser</code> 的返回值是一个新的函数，我们称之为 <code>parse</code>。</p> <h4 id="_2-parse-element-data-开始解析"><a href="#_2-parse-element-data-开始解析" class="header-anchor">#</a> 2. <code>parse(element, data)</code> - 开始解析</h4> <p><code>parse</code> 函数接收两个核心参数：<code>element</code>（描述UI结构的JSON树）和 <code>data</code>（渲染时需要的动态数据）。一旦被调用，它就立即通过 <code>codegen(element)</code> 开启核心的“代码生成”之旅。</p> <h4 id="_3-codegen-element-核心代码生成器-递归"><a href="#_3-codegen-element-核心代码生成器-递归" class="header-anchor">#</a> 3. <code>codegen(element)</code> - 核心代码生成器（递归）</h4> <p>这是编译器的“大脑”，它递归地遍历 <code>element</code> 树，并根据节点的属性决定生成什么样的JavaScript代码片段：</p> <ul><li><strong>遇到 <code>each</code> 指令</strong> (类似 <code>v-for</code>)：调用 <code>genEach</code> 来生成循环代码。</li> <li><strong>遇到 <code>show</code> 指令</strong> (类似 <code>v-if</code>)：调用 <code>genShow</code> 来生成条件判断代码。</li> <li><strong>普通元素节点</strong>：调用 <code>genElement</code> 来生成标准的元素创建代码。</li></ul> <p>这里有一个非常巧妙的细节：<code>element.eachProcessed</code> 标记。它确保了在递归过程中，同一个节点的 <code>each</code> 或 <code>show</code> 指令只被处理一次，避免了无限循环。</p> <h4 id="_4-geneach-genshow-genelement-拼接js代码字符串"><a href="#_4-geneach-genshow-genelement-拼接js代码字符串" class="header-anchor">#</a> 4. <code>genEach</code>, <code>genShow</code>, <code>genElement</code> - 拼接JS代码字符串</h4> <p>这三个函数是真正的“建筑师”，负责将抽象的节点信息转换成具体的代码字符串：</p> <ul><li><strong><code>genEach(element)</code></strong>: 它会解析 <code>item in items</code> 这样的语法，并生成一段调用 <code>_l(items, (item, index) =&gt; { ... })</code> 的代码字符串。这里的 <code>_l</code> 是一个我们稍后会注入的运行时循环辅助函数。</li> <li><strong><code>genShow(element)</code></strong>: 它会生成一段三元表达式代码字符串，如 <code>condition &amp;&amp; &quot;...&quot;</code>，实现条件渲染。</li> <li><strong><code>genElement(element)</code></strong>: 这是最核心的部分。
<ol><li><strong>动静分离</strong>：它做了一项非常重要的优化——将节点的 <strong>静态属性</strong> 和 <strong>动态属性</strong>（以 <code>:</code> 前缀标识）分离开。</li> <li>静态属性通过 <code>JSON.stringify()</code> 直接固化成一个JSON字符串，无需运行时计算。</li> <li>动态属性则被组合成一个对象字面量字符串，如 <code>{ prop1: dynamicValue1, ... }</code>，值是动态的表达式。</li> <li>最终，它生成一段调用 <code>_h(_m(staticProps, dynamicProps), data, children)</code> 的代码。<code>_h</code> 是渲染元素的辅助函数，<code>_m</code> 是合并属性的辅助函数。</li> <li>它的子节点，则通过递归调用 <code>codegen(child)</code> 来生成对应的代码，最终拼接成一个完整的调用链。</li></ol></li></ul> <h4 id="_5-new-function-jit-即时编译的魔法"><a href="#_5-new-function-jit-即时编译的魔法" class="header-anchor">#</a> 5. <code>new Function(...)</code> - JIT 即时编译的魔法</h4> <p>所有生成的代码字符串被拼接在一起，形成一个完整的函数体。此时，<code>const render = new Function('params', '_h', '_l', '_m', '_f', code)</code> 这行代码发挥了它的魔力。它在运行时动态创建了一个新的JavaScript函数，这个函数的参数就是我们代码里用到的所有运行时辅助函数的占位符（<code>_h</code>, <code>_l</code> 等）。</p> <h4 id="_6-render-执行并注入运行时依赖"><a href="#_6-render-执行并注入运行时依赖" class="header-anchor">#</a> 6. <code>render(...)</code> - 执行并注入运行时依赖</h4> <p>最后，我们调用这个刚刚被动态编译出来的 <code>render</code> 函数，并将它运行时所需要的所有“工具”作为参数注入进去：</p> <ul><li><code>data</code>: 作为 <code>params</code> 传入，这样函数内部就可以通过解构赋值访问到所有动态数据。</li> <li><code>handler</code>: 作为 <code>_h</code> (hyperscript) 传入，这是最终创建VNode或Element的函数。</li> <li><code>eachHandler</code>: 作为 <code>_l</code> (list) 传入，提供了处理循环的具体实现。</li> <li><code>mergeDynamicProps</code>: 作为 <code>_m</code> (merge) 传入，负责在运行时将静态属性和动态属性合并。</li> <li><code>filterList</code>: 作为 <code>_f</code> (filter) 传入，用于处理和过滤子节点数组，例如 <code>flat</code> 操作。</li></ul> <h2 id="设计亮点总结"><a href="#设计亮点总结" class="header-anchor">#</a> 设计亮点总结</h2> <p>这段代码虽然行数不多，但处处体现了编译思维的精髓：</p> <ol><li><p><strong>关注点分离 (Separation of Concerns)</strong>：</p> <ul><li><strong>模板定义 (JSON <code>Element</code>)</strong>: 负责定义 <strong>“UI是什么”</strong>。</li> <li><strong>编译器 (<code>codegen</code>)</strong>: 负责将“是什么”高效地转换成 <strong>“如何渲染”</strong> 的指令代码。</li> <li><strong>运行时 (Runtime)</strong>: <code>_h</code>, <code>_l</code> 等辅助函数提供了 <strong>“如何渲染”</strong> 的具体实现。三者各司其职，清晰解耦。</li></ul></li> <li><p><strong>性能至上 (Performance-Oriented)</strong>：通过一次性编译生成原生JS函数，避免了反复解释执行的性能开销。将静态和动态属性分离处理，也是Vue等成熟框架中常见的编译优化手段，可以最大化地减少运行时的计算量。</p></li> <li><p><strong>高度可扩展 (Highly Extensible)</strong>：由于最终的渲染行为是由外部注入的 <code>handler</code> 决定的，所以这个编译引擎是平台无关的。你可以传入一个创建Vue VNode的<code>handler</code>，也可以传入一个创建React Element的<code>handler</code>，而编译器本身无需任何改动，具有极强的灵活性和扩展性。</p></li></ol> <p>总而言之，这不仅仅是一个简单的JSON遍历器，而是一个设计精良、高度优化、可扩展的微型模板编译引擎，是前端工程化深度的一个绝佳范例。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matt-blog/pages/project/interview-preparation.html" class="prev">
        项目经验剖析：面试准备指南
      </a></span> <span class="next"><a href="/matt-blog/pages/qwik/">
        Qwik 框架学习指南
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matt-blog/assets/js/app.5d95d86b.js" defer></script><script src="/matt-blog/assets/js/2.778bb4ad.js" defer></script><script src="/matt-blog/assets/js/1.f8bb34da.js" defer></script><script src="/matt-blog/assets/js/29.6e123920.js" defer></script>
  </body>
</html>
