<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rust æ‰€æœ‰æƒç³»ç»Ÿ | mattçš„å‰ç«¯ä¹‹è·¯</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/matt-blog/cainiao.jpg">
    <meta name="description" content="mattçš„å‰ç«¯ä¹‹è·¯">
    
    <link rel="preload" href="/matt-blog/assets/css/0.styles.67df34d8.css" as="style"><link rel="preload" href="/matt-blog/assets/js/app.25e0c05f.js" as="script"><link rel="preload" href="/matt-blog/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/matt-blog/assets/js/1.f8bb34da.js" as="script"><link rel="preload" href="/matt-blog/assets/js/43.fc442923.js" as="script"><link rel="prefetch" href="/matt-blog/assets/js/10.fde088a2.js"><link rel="prefetch" href="/matt-blog/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/matt-blog/assets/js/12.27d4f152.js"><link rel="prefetch" href="/matt-blog/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/matt-blog/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/matt-blog/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/matt-blog/assets/js/16.85253907.js"><link rel="prefetch" href="/matt-blog/assets/js/17.c2838453.js"><link rel="prefetch" href="/matt-blog/assets/js/18.3256f17f.js"><link rel="prefetch" href="/matt-blog/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/matt-blog/assets/js/20.0d880388.js"><link rel="prefetch" href="/matt-blog/assets/js/21.33b300c9.js"><link rel="prefetch" href="/matt-blog/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/matt-blog/assets/js/23.4db98f57.js"><link rel="prefetch" href="/matt-blog/assets/js/24.d445e64c.js"><link rel="prefetch" href="/matt-blog/assets/js/25.c039e47f.js"><link rel="prefetch" href="/matt-blog/assets/js/26.6d7abe1e.js"><link rel="prefetch" href="/matt-blog/assets/js/27.bfaa829f.js"><link rel="prefetch" href="/matt-blog/assets/js/28.84b83b90.js"><link rel="prefetch" href="/matt-blog/assets/js/29.bb7097bb.js"><link rel="prefetch" href="/matt-blog/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/matt-blog/assets/js/30.1670eed9.js"><link rel="prefetch" href="/matt-blog/assets/js/31.f5bc0d9f.js"><link rel="prefetch" href="/matt-blog/assets/js/32.5f4a954a.js"><link rel="prefetch" href="/matt-blog/assets/js/33.6f9ca409.js"><link rel="prefetch" href="/matt-blog/assets/js/34.6f9326f3.js"><link rel="prefetch" href="/matt-blog/assets/js/35.6a2647bd.js"><link rel="prefetch" href="/matt-blog/assets/js/36.134fd2af.js"><link rel="prefetch" href="/matt-blog/assets/js/37.5d451018.js"><link rel="prefetch" href="/matt-blog/assets/js/38.f2a610a8.js"><link rel="prefetch" href="/matt-blog/assets/js/39.aff1ff99.js"><link rel="prefetch" href="/matt-blog/assets/js/4.45665f8a.js"><link rel="prefetch" href="/matt-blog/assets/js/40.3ac444af.js"><link rel="prefetch" href="/matt-blog/assets/js/41.894aac4a.js"><link rel="prefetch" href="/matt-blog/assets/js/42.89cd257f.js"><link rel="prefetch" href="/matt-blog/assets/js/44.13c91cd7.js"><link rel="prefetch" href="/matt-blog/assets/js/45.7242df67.js"><link rel="prefetch" href="/matt-blog/assets/js/46.15ff82f0.js"><link rel="prefetch" href="/matt-blog/assets/js/47.2188f04b.js"><link rel="prefetch" href="/matt-blog/assets/js/48.a7be1505.js"><link rel="prefetch" href="/matt-blog/assets/js/49.c492819b.js"><link rel="prefetch" href="/matt-blog/assets/js/5.7098d77a.js"><link rel="prefetch" href="/matt-blog/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/matt-blog/assets/js/7.6a854e57.js"><link rel="prefetch" href="/matt-blog/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/matt-blog/assets/css/0.styles.67df34d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matt-blog/" class="home-link router-link-active"><img src="/matt-blog/cainiao.jpg" alt="mattçš„å‰ç«¯ä¹‹è·¯" class="logo"> <span class="site-name can-hide">mattçš„å‰ç«¯ä¹‹è·¯</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è®¡ç®—æœºç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vueå­¦ä¹ </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpackå­¦ä¹ </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hybrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>performance</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/matt-blog/pages/rust/index.md" class="sidebar-heading clickable open"><span>Rust å­¦ä¹ </span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/matt-blog/pages/rust/basic-syntax.html" class="sidebar-link">Rust åŸºç¡€è¯­æ³•</a></li><li><a href="/matt-blog/pages/rust/ownership.html" aria-current="page" class="active sidebar-link">æ‰€æœ‰æƒç³»ç»Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#ğŸ“‹-æœ¬ç« å†…å®¹" class="sidebar-link">ğŸ“‹ æœ¬ç« å†…å®¹</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#æ‰€æœ‰æƒè§„åˆ™" class="sidebar-link">æ‰€æœ‰æƒè§„åˆ™</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#å˜é‡ä½œç”¨åŸŸ" class="sidebar-link">å˜é‡ä½œç”¨åŸŸ</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#æ•°æ®äº¤äº’æ–¹å¼" class="sidebar-link">æ•°æ®äº¤äº’æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#æ‰€æœ‰æƒä¸å‡½æ•°" class="sidebar-link">æ‰€æœ‰æƒä¸å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#å¼•ç”¨ä¸å€Ÿç”¨" class="sidebar-link">å¼•ç”¨ä¸å€Ÿç”¨</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#åˆ‡ç‰‡ç±»å‹" class="sidebar-link">åˆ‡ç‰‡ç±»å‹</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#ğŸ’¡-å…³é”®è¦ç‚¹" class="sidebar-link">ğŸ’¡ å…³é”®è¦ç‚¹</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#ğŸ¯-å®è·µå»ºè®®" class="sidebar-link">ğŸ¯ å®è·µå»ºè®®</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/ownership.html#ğŸ”—-ç›¸å…³é“¾æ¥" class="sidebar-link">ğŸ”— ç›¸å…³é“¾æ¥</a></li></ul></li><li><a href="/matt-blog/pages/rust/data-structures.html" class="sidebar-link">æ•°æ®ç»“æ„</a></li><li><a href="/matt-blog/pages/rust/collections.html" class="sidebar-link">é›†åˆç±»å‹</a></li><li><a href="/matt-blog/pages/rust/error-handling.html" class="sidebar-link">é”™è¯¯å¤„ç†</a></li><li><a href="/matt-blog/pages/rust/generics-and-traits.html" class="sidebar-link">æ³›å‹ä¸ç‰¹å¾</a></li><li><a href="/matt-blog/pages/rust/functional-programming.html" class="sidebar-link">å‡½æ•°å¼ç¼–ç¨‹</a></li><li><a href="/matt-blog/pages/rust/smart-pointers.html" class="sidebar-link">æ™ºèƒ½æŒ‡é’ˆ</a></li><li><a href="/matt-blog/pages/rust/tools-and-project.html" class="sidebar-link">å·¥å…·ä¸é¡¹ç›®ç®¡ç†</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/matt-blog/pages/qwik/index.md" class="sidebar-heading clickable"><span>Qwik æ¡†æ¶</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rust-æ‰€æœ‰æƒç³»ç»Ÿ"><a href="#rust-æ‰€æœ‰æƒç³»ç»Ÿ" class="header-anchor">#</a> Rust æ‰€æœ‰æƒç³»ç»Ÿ</h1> <p>æ‰€æœ‰æƒï¼ˆOwnershipï¼‰æ˜¯ Rust æœ€ç‹¬ç‰¹å’Œæ ¸å¿ƒçš„ç‰¹æ€§ï¼Œè®© Rust æ— éœ€åƒåœ¾å›æ”¶å³å¯ä¿è¯å†…å­˜å®‰å…¨ã€‚</p> <h2 id="ğŸ“‹-æœ¬ç« å†…å®¹"><a href="#ğŸ“‹-æœ¬ç« å†…å®¹" class="header-anchor">#</a> ğŸ“‹ æœ¬ç« å†…å®¹</h2> <ul><li><a href="#%E6%89%80%E6%9C%89%E6%9D%83%E8%A7%84%E5%88%99">æ‰€æœ‰æƒè§„åˆ™</a></li> <li><a href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F">å˜é‡ä½œç”¨åŸŸ</a></li> <li><a href="#%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F">æ•°æ®äº¤äº’æ–¹å¼</a></li> <li><a href="#%E6%89%80%E6%9C%89%E6%9D%83%E4%B8%8E%E5%87%BD%E6%95%B0">æ‰€æœ‰æƒä¸å‡½æ•°</a></li> <li><a href="#%E5%BC%95%E7%94%A8%E4%B8%8E%E5%80%9F%E7%94%A8">å¼•ç”¨ä¸å€Ÿç”¨</a></li> <li><a href="#%E5%88%87%E7%89%87%E7%B1%BB%E5%9E%8B">åˆ‡ç‰‡ç±»å‹</a></li></ul> <h2 id="æ‰€æœ‰æƒè§„åˆ™"><a href="#æ‰€æœ‰æƒè§„åˆ™" class="header-anchor">#</a> æ‰€æœ‰æƒè§„åˆ™</h2> <p>Rust ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶**æ‰€æœ‰è€…ï¼ˆownerï¼‰**çš„å˜é‡ã€‚</p> <h3 id="ä¸‰æ¡åŸºæœ¬è§„åˆ™"><a href="#ä¸‰æ¡åŸºæœ¬è§„åˆ™" class="header-anchor">#</a> ä¸‰æ¡åŸºæœ¬è§„åˆ™</h3> <ol><li><strong>Rust ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶æ‰€æœ‰è€…çš„å˜é‡</strong></li> <li><strong>å€¼åœ¨ä»»ä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…</strong></li> <li><strong>å½“æ‰€æœ‰è€…ï¼ˆå˜é‡ï¼‰ç¦»å¼€ä½œç”¨åŸŸï¼Œè¿™ä¸ªå€¼å°†è¢«ä¸¢å¼ƒ</strong></li></ol> <h2 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="header-anchor">#</a> å˜é‡ä½œç”¨åŸŸ</h2> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token punctuation">{</span>                      <span class="token comment">// s åœ¨è¿™é‡Œæ— æ•ˆ, å®ƒå°šæœªå£°æ˜</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// ä»æ­¤å¤„èµ·ï¼Œs å¼€å§‹æœ‰æ•ˆ</span>

    <span class="token comment">// ä½¿ç”¨ s</span>
<span class="token punctuation">}</span>                      <span class="token comment">// æ­¤ä½œç”¨åŸŸå·²ç»“æŸï¼Œs ä¸å†æœ‰æ•ˆ</span>
</code></pre></div><h3 id="string-ç±»å‹"><a href="#string-ç±»å‹" class="header-anchor">#</a> String ç±»å‹</h3> <p><code>String</code> ç±»å‹ç®¡ç†è¢«åˆ†é…åˆ°å †ä¸Šçš„æ•°æ®ï¼Œå› æ­¤èƒ½å¤Ÿå­˜å‚¨åœ¨ç¼–è¯‘æ—¶æœªçŸ¥å¤§å°çš„æ–‡æœ¬ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">&quot;, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// push_str() åœ¨å­—ç¬¦ä¸²åè¿½åŠ å­—é¢å€¼</span>

<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†æ‰“å° `hello, world!`</span>
</code></pre></div><h2 id="æ•°æ®äº¤äº’æ–¹å¼"><a href="#æ•°æ®äº¤äº’æ–¹å¼" class="header-anchor">#</a> æ•°æ®äº¤äº’æ–¹å¼</h2> <h3 id="æ–¹å¼ä¸€-ç§»åŠ¨-move"><a href="#æ–¹å¼ä¸€-ç§»åŠ¨-move" class="header-anchor">#</a> æ–¹å¼ä¸€ï¼šç§»åŠ¨ï¼ˆMoveï¼‰</h3> <p>å¯¹äº <code>String</code> ç±»å‹ï¼Œä¸ºäº†æ”¯æŒä¸€ä¸ªå¯å˜ã€å¯å¢é•¿çš„æ–‡æœ¬ç‰‡æ®µï¼Œéœ€è¦åœ¨å †ä¸Šåˆ†é…ä¸€å—åœ¨ç¼–è¯‘æ—¶æœªçŸ¥å¤§å°çš„å†…å­˜æ¥å­˜æ”¾å†…å®¹ã€‚</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">;</span>

<span class="token comment">// println!(&quot;{}&quot;, s1); // é”™è¯¯ï¼s1 å·²è¢«ç§»åŠ¨</span>
</code></pre></div><p><strong>å†…å­˜å¸ƒå±€å›¾ç¤º</strong>ï¼š</p> <p><img src="https://raw.githubusercontent.com/matf5/fileCache/master/20240425163816.png" alt="æ ˆå’Œå †çš„å†…å­˜å¸ƒå±€"></p> <p>å·¦ä¾§ä¸ºæ ˆï¼Œå³ä¾§ä¸ºå †</p> <p><img src="https://raw.githubusercontent.com/matf5/fileCache/master/20240425164109.png" alt="ç§»åŠ¨åçš„å†…å­˜çŠ¶æ€"></p> <p>ç§»åŠ¨ä¹‹ååªæœ‰ <code>s2</code> æœ‰æ•ˆï¼Œ<code>s1</code> ä¼šè¢«é‡Šæ”¾</p> <p><strong>é‡è¦æ¦‚å¿µ</strong>ï¼š</p> <ul><li><strong>é•¿åº¦ï¼ˆLengthï¼‰</strong>ï¼š<code>String</code> çš„å†…å®¹å½“å‰ä½¿ç”¨äº†å¤šå°‘å­—èŠ‚çš„å†…å­˜</li> <li><strong>å®¹é‡ï¼ˆCapacityï¼‰</strong>ï¼š<code>String</code> ä»åˆ†é…å™¨æ€»å…±è·å–äº†å¤šå°‘å­—èŠ‚çš„å†…å­˜</li></ul> <h3 id="æ–¹å¼äºŒ-å…‹éš†-clone"><a href="#æ–¹å¼äºŒ-å…‹éš†-clone" class="header-anchor">#</a> æ–¹å¼äºŒï¼šå…‹éš†ï¼ˆCloneï¼‰</h3> <p>å¦‚æœæˆ‘ä»¬<strong>ç¡®å®</strong>éœ€è¦æ·±åº¦å¤åˆ¶ <code>String</code> ä¸­å †ä¸Šçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>clone</code> æ–¹æ³•ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;s1 = {}, s2 = {}&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™æ ·å°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†</span>
</code></pre></div><h3 id="æ–¹å¼ä¸‰-æ‹·è´-copy"><a href="#æ–¹å¼ä¸‰-æ‹·è´-copy" class="header-anchor">#</a> æ–¹å¼ä¸‰ï¼šæ‹·è´ï¼ˆCopyï¼‰</h3> <p>æ ˆä¸Šçš„æ•°æ®å¯ä»¥å¿«é€Ÿå¤åˆ¶ï¼Œå› æ­¤èµ‹å€¼ååŸå˜é‡ä»ç„¶å¯ç”¨ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>

<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;x = {}, y = {}&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éƒ½æœ‰æ•ˆ</span>
</code></pre></div><h4 id="copy-trait"><a href="#copy-trait" class="header-anchor">#</a> Copy trait</h4> <p>å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº† <code>Copy</code> traitï¼Œé‚£ä¹ˆä¸€ä¸ªæ—§çš„å˜é‡åœ¨å°†å…¶èµ‹å€¼ç»™å…¶ä»–å˜é‡åä»ç„¶å¯ç”¨ã€‚</p> <p><strong>å®ç°äº† <code>Copy</code> trait çš„ç±»å‹</strong>ï¼š</p> <ul><li>æ‰€æœ‰æ•´æ•°ç±»å‹ï¼Œæ¯”å¦‚ <code>u32</code></li> <li>å¸ƒå°”ç±»å‹ï¼Œ<code>bool</code></li> <li>æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹ï¼Œæ¯”å¦‚ <code>f64</code></li> <li>å­—ç¬¦ç±»å‹ï¼Œ<code>char</code></li> <li>å…ƒç»„ï¼Œå½“ä¸”ä»…å½“å…¶åŒ…å«çš„ç±»å‹ä¹Ÿéƒ½å®ç° <code>Copy</code> çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼Œ<code>(i32, i32)</code> å®ç°äº† <code>Copy</code>ï¼Œä½† <code>(i32, String)</code> å°±æ²¡æœ‰</li></ul> <h2 id="æ‰€æœ‰æƒä¸å‡½æ•°"><a href="#æ‰€æœ‰æƒä¸å‡½æ•°" class="header-anchor">#</a> æ‰€æœ‰æƒä¸å‡½æ•°</h2> <p>å°†å€¼ä¼ é€’ç»™å‡½æ•°åœ¨è¯­ä¹‰ä¸Šä¸ç»™å˜é‡èµ‹å€¼ç›¸ä¼¼ã€‚å‘å‡½æ•°ä¼ é€’å€¼å¯èƒ½ä¼šç§»åŠ¨æˆ–è€…å¤åˆ¶ï¼Œå°±åƒèµ‹å€¼è¯­å¥ä¸€æ ·ã€‚</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// s è¿›å…¥ä½œç”¨åŸŸ</span>

    <span class="token function">takes_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// s çš„å€¼ç§»åŠ¨åˆ°å‡½æ•°é‡Œ ...</span>
                                    <span class="token comment">// ... æ‰€ä»¥åˆ°è¿™é‡Œä¸å†æœ‰æ•ˆ</span>

    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>                      <span class="token comment">// x è¿›å…¥ä½œç”¨åŸŸ</span>

    <span class="token function">makes_copy</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// x åº”è¯¥ç§»åŠ¨å‡½æ•°é‡Œï¼Œ</span>
                                    <span class="token comment">// ä½† i32 æ˜¯ Copy çš„ï¼Œæ‰€ä»¥åœ¨åé¢å¯ç»§ç»­ä½¿ç”¨ x</span>

<span class="token punctuation">}</span> <span class="token comment">// è¿™é‡Œ, x å…ˆç§»å‡ºäº†ä½œç”¨åŸŸï¼Œç„¶åæ˜¯ sã€‚ä½†å› ä¸º s çš„å€¼å·²è¢«ç§»èµ°ï¼Œ</span>
  <span class="token comment">// æ‰€ä»¥ä¸ä¼šæœ‰ç‰¹æ®Šæ“ä½œ</span>

<span class="token keyword">fn</span> <span class="token function-definition function">takes_ownership</span><span class="token punctuation">(</span>some_string<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// some_string è¿›å…¥ä½œç”¨åŸŸ</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> some_string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// è¿™é‡Œï¼Œsome_string ç§»å‡ºä½œç”¨åŸŸå¹¶è°ƒç”¨ `drop` æ–¹æ³•ã€‚å ç”¨çš„å†…å­˜è¢«é‡Šæ”¾</span>

<span class="token keyword">fn</span> <span class="token function-definition function">makes_copy</span><span class="token punctuation">(</span>some_integer<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// some_integer è¿›å…¥ä½œç”¨åŸŸ</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> some_integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// è¿™é‡Œï¼Œsome_integer ç§»å‡ºä½œç”¨åŸŸã€‚ä¸ä¼šæœ‰ç‰¹æ®Šæ“ä½œ</span>
</code></pre></div><h3 id="è¿”å›å€¼ä¸ä½œç”¨åŸŸ"><a href="#è¿”å›å€¼ä¸ä½œç”¨åŸŸ" class="header-anchor">#</a> è¿”å›å€¼ä¸ä½œç”¨åŸŸ</h3> <p>è¿”å›å€¼ä¹Ÿå¯ä»¥è½¬ç§»æ‰€æœ‰æƒï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">gives_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// gives_ownership å°†è¿”å›å€¼</span>
                                        <span class="token comment">// ç§»ç»™ s1</span>

    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// s2 è¿›å…¥ä½œç”¨åŸŸ</span>

    <span class="token keyword">let</span> s3 <span class="token operator">=</span> <span class="token function">takes_and_gives_back</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// s2 è¢«ç§»åŠ¨åˆ°</span>
                                        <span class="token comment">// takes_and_gives_back ä¸­,</span>
                                        <span class="token comment">// å®ƒä¹Ÿå°†è¿”å›å€¼ç§»ç»™ s3</span>
<span class="token punctuation">}</span> <span class="token comment">// è¿™é‡Œ, s3 ç§»å‡ºä½œç”¨åŸŸå¹¶è¢«ä¸¢å¼ƒã€‚s2 ä¹Ÿç§»å‡ºä½œç”¨åŸŸï¼Œä½†å·²è¢«ç§»èµ°ï¼Œ</span>
  <span class="token comment">// æ‰€ä»¥ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚s1 ç§»å‡ºä½œç”¨åŸŸå¹¶è¢«ä¸¢å¼ƒ</span>

<span class="token keyword">fn</span> <span class="token function-definition function">gives_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>           <span class="token comment">// gives_ownership å°†è¿”å›å€¼ç§»åŠ¨ç»™</span>
                                           <span class="token comment">// è°ƒç”¨å®ƒçš„å‡½æ•°</span>

    <span class="token keyword">let</span> some_string <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;yours&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// some_string è¿›å…¥ä½œç”¨åŸŸ</span>

    some_string                              <span class="token comment">// è¿”å› some_string å¹¶ç§»å‡ºç»™è°ƒç”¨çš„å‡½æ•°</span>
<span class="token punctuation">}</span>

<span class="token comment">// takes_and_gives_back å°†ä¼ å…¥å­—ç¬¦ä¸²å¹¶è¿”å›è¯¥å€¼</span>
<span class="token keyword">fn</span> <span class="token function-definition function">takes_and_gives_back</span><span class="token punctuation">(</span>a_string<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token comment">// a_string è¿›å…¥ä½œç”¨åŸŸ</span>

    a_string  <span class="token comment">// è¿”å› a_string å¹¶ç§»å‡ºç»™è°ƒç”¨çš„å‡½æ•°</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¼•ç”¨ä¸å€Ÿç”¨"><a href="#å¼•ç”¨ä¸å€Ÿç”¨" class="header-anchor">#</a> å¼•ç”¨ä¸å€Ÿç”¨</h2> <p>å¼•ç”¨ï¼ˆreferenceï¼‰åƒä¸€ä¸ªæŒ‡é’ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ç”±æ­¤è®¿é—®å‚¨å­˜äºè¯¥åœ°å€çš„å±äºå…¶ä»–å˜é‡çš„æ•°æ®ã€‚</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token function">calculate_length</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;The length of '{}' is {}.&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">calculate_length</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">usize</span> <span class="token punctuation">{</span>
    s<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://raw.githubusercontent.com/matf5/fileCache/master/20240425165744.png" alt="å¼•ç”¨ç¤ºæ„å›¾"></p> <h3 id="å¯å˜å¼•ç”¨"><a href="#å¯å˜å¼•ç”¨" class="header-anchor">#</a> å¯å˜å¼•ç”¨</h3> <p>æ­£å¸¸å¼•ç”¨æ˜¯ä¸å¯å˜çš„ï¼Œæ— æ³•é€šè¿‡å¼•ç”¨ä¿®æ”¹å†…å®¹ã€‚å¦‚æœè¦å¯å˜ï¼Œå¯ä»¥ä¿®æ”¹ä¸º <code>&amp;mut</code>ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">change</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">change</span><span class="token punctuation">(</span>some_string<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    some_string<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">&quot;, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¯å˜å¼•ç”¨çš„é™åˆ¶"><a href="#å¯å˜å¼•ç”¨çš„é™åˆ¶" class="header-anchor">#</a> å¯å˜å¼•ç”¨çš„é™åˆ¶</h3> <p>åœ¨åŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯¹æŸä¸€ç‰¹å®šæ•°æ®çš„å¯å˜å¼•ç”¨ã€‚å°è¯•åˆ›å»ºä¸¤ä¸ªå¯å˜å¼•ç”¨çš„ä»£ç å°†ä¼šå¤±è´¥ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>
<span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span> <span class="token comment">// é”™è¯¯ï¼</span>

<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}, {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½†ä»¥ä¸‹ä»£ç æ²¡é—®é¢˜ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span> <span class="token comment">// æ²¡é—®é¢˜</span>
<span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span> <span class="token comment">// æ²¡é—®é¢˜</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{} and {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ­¤ä½ç½®ä¹‹å r1 å’Œ r2 ä¸å†ä½¿ç”¨</span>

<span class="token keyword">let</span> r3 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span> <span class="token comment">// æ²¡é—®é¢˜</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> r3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æ‚¬å‚å¼•ç”¨-dangling-references"><a href="#æ‚¬å‚å¼•ç”¨-dangling-references" class="header-anchor">#</a> æ‚¬å‚å¼•ç”¨ï¼ˆDangling Referencesï¼‰</h3> <p>æ‚¬å‚å¼•ç”¨æ˜¯æŒ‡å¼•ç”¨äº†ä¸€ä¸ªå·²ç»è¢«é‡Šæ”¾çš„å†…å­˜åœ°å€ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> reference_to_nothing <span class="token operator">=</span> <span class="token function">dangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">dangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token comment">// é”™è¯¯ï¼</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">&amp;</span>s <span class="token comment">// è¿™é‡Œsç¦»å¼€ä½œç”¨åŸŸå·²ç»è¢«é‡Šæ”¾æ‰äº†</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­£ç¡®çš„åšæ³•æ˜¯ç›´æ¥è¿”å› <code>String</code>ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">no_dangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    s <span class="token comment">// æ‰€æœ‰æƒè¢«ç§»åŠ¨å‡ºå»ï¼Œæ‰€ä»¥æ²¡æœ‰å€¼è¢«é‡Šæ”¾</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¼•ç”¨çš„è§„åˆ™"><a href="#å¼•ç”¨çš„è§„åˆ™" class="header-anchor">#</a> å¼•ç”¨çš„è§„åˆ™</h3> <ol><li><strong>åœ¨ä»»æ„ç»™å®šæ—¶é—´ï¼Œè¦ä¹ˆåªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆåªèƒ½æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨</strong></li> <li><strong>å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„</strong></li></ol> <h3 id="è§£å¼•ç”¨æ“ä½œç¬¦"><a href="#è§£å¼•ç”¨æ“ä½œç¬¦" class="header-anchor">#</a> è§£å¼•ç”¨æ“ä½œç¬¦ (*)</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>

    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è§£å¼•ç”¨</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åˆ‡ç‰‡ç±»å‹"><a href="#åˆ‡ç‰‡ç±»å‹" class="header-anchor">#</a> åˆ‡ç‰‡ç±»å‹</h2> <p>åˆ‡ç‰‡ï¼ˆsliceï¼‰è®©ä½ å¼•ç”¨é›†åˆä¸­ä¸€æ®µè¿ç»­çš„å…ƒç´ åºåˆ—ï¼Œè€Œä¸ç”¨å¼•ç”¨æ•´ä¸ªé›†åˆã€‚</p> <h3 id="å­—ç¬¦ä¸²åˆ‡ç‰‡"><a href="#å­—ç¬¦ä¸²åˆ‡ç‰‡" class="header-anchor">#</a> å­—ç¬¦ä¸²åˆ‡ç‰‡</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> hello <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> world <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">..</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// è¯­æ³•ç³–</span>
<span class="token keyword">let</span> hello <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// ä»å¼€å§‹åˆ°ç´¢å¼•5</span>
<span class="token keyword">let</span> world <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// ä»ç´¢å¼•6åˆ°ç»“æŸ</span>
<span class="token keyword">let</span> entire <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// æ•´ä¸ªå­—ç¬¦ä¸²</span>
</code></pre></div><h3 id="å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å®é™…åº”ç”¨"><a href="#å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å®é™…åº”ç”¨" class="header-anchor">#</a> å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å®é™…åº”ç”¨</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">first_word</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> bytes <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">as_bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>item<span class="token punctuation">)</span> <span class="token keyword">in</span> bytes<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> item <span class="token operator">==</span> <span class="token char">b' '</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> my_string <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// `first_word` æ¥å— `String` çš„åˆ‡ç‰‡ï¼Œæ— è®ºæ˜¯éƒ¨åˆ†è¿˜æ˜¯å…¨éƒ¨</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_string<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_string<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// `first_word` ä¹Ÿæ¥å— `String` çš„å¼•ç”¨ï¼Œ</span>
    <span class="token comment">// è¿™ç­‰åŒäº `String` çš„å…¨éƒ¨åˆ‡ç‰‡</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_string<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> my_string_literal <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// `first_word` æ¥å—å­—ç¬¦ä¸²å­—é¢é‡çš„åˆ‡ç‰‡ï¼Œæ— è®ºæ˜¯éƒ¨åˆ†è¿˜æ˜¯å…¨éƒ¨</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_string_literal<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_string_literal<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å­—ç¬¦ä¸²å­—é¢é‡å°±æ˜¯åˆ‡ç‰‡</span>
    <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token function">first_word</span><span class="token punctuation">(</span>my_string_literal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ›´å¥½çš„-first-word-å®ç°"><a href="#æ›´å¥½çš„-first-word-å®ç°" class="header-anchor">#</a> æ›´å¥½çš„ <code>first_word</code> å®ç°</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">first_word</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> bytes <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">as_bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>item<span class="token punctuation">)</span> <span class="token keyword">in</span> bytes<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> item <span class="token operator">==</span> <span class="token char">b' '</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å…¶ä»–åˆ‡ç‰‡"><a href="#å…¶ä»–åˆ‡ç‰‡" class="header-anchor">#</a> å…¶ä»–åˆ‡ç‰‡</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ğŸ’¡-å…³é”®è¦ç‚¹"><a href="#ğŸ’¡-å…³é”®è¦ç‚¹" class="header-anchor">#</a> ğŸ’¡ å…³é”®è¦ç‚¹</h2> <ol><li><strong>æ‰€æœ‰æƒç³»ç»Ÿç¡®ä¿å†…å­˜å®‰å…¨</strong>ï¼šåœ¨ç¼–è¯‘æ—¶é˜²æ­¢æ•°æ®ç«äº‰å’Œå†…å­˜æ³„æ¼</li> <li><strong>ç§»åŠ¨è¯­ä¹‰æ˜¯é»˜è®¤è¡Œä¸º</strong>ï¼šé¿å…æ„å¤–çš„æ·±æ‹·è´</li> <li><strong>å€Ÿç”¨æ£€æŸ¥å™¨</strong>ï¼šç¡®ä¿å¼•ç”¨çš„æœ‰æ•ˆæ€§</li> <li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç¡®ä¿å¼•ç”¨ä¸ä¼šè¶…è¿‡å…¶æŒ‡å‘çš„å€¼</li> <li><strong>åˆ‡ç‰‡æä¾›å®‰å…¨çš„å±€éƒ¨è®¿é—®</strong>ï¼šæ— éœ€æ‹¥æœ‰æ•´ä¸ªé›†åˆçš„æ‰€æœ‰æƒ</li></ol> <h2 id="ğŸ¯-å®è·µå»ºè®®"><a href="#ğŸ¯-å®è·µå»ºè®®" class="header-anchor">#</a> ğŸ¯ å®è·µå»ºè®®</h2> <ol><li><strong>ä¼˜å…ˆä½¿ç”¨å€Ÿç”¨è€Œéè·å–æ‰€æœ‰æƒ</strong></li> <li><strong>æ˜ç¡®åŒºåˆ†å¯å˜å’Œä¸å¯å˜å¼•ç”¨</strong></li> <li><strong>åˆ©ç”¨åˆ‡ç‰‡è¿›è¡Œå®‰å…¨çš„åºåˆ—æ“ä½œ</strong></li> <li><strong>ç†è§£ç§»åŠ¨è¯­ä¹‰ï¼Œé¿å…åœ¨ç§»åŠ¨åä½¿ç”¨å˜é‡</strong></li> <li><strong>å–„ç”¨ <code>clone()</code> è¿›è¡Œå¿…è¦çš„æ·±æ‹·è´</strong></li></ol> <h2 id="ğŸ”—-ç›¸å…³é“¾æ¥"><a href="#ğŸ”—-ç›¸å…³é“¾æ¥" class="header-anchor">#</a> ğŸ”— ç›¸å…³é“¾æ¥</h2> <ul><li><strong>ä¸Šä¸€ç« </strong>: <a href="/matt-blog/pages/rust/tools-and-project.html">å·¥å…·ä¸é¡¹ç›®ç®¡ç†</a></li> <li><strong>ä¸‹ä¸€ç« </strong>: <a href="/matt-blog/pages/rust/data-structures.html">æ•°æ®ç»“æ„</a></li> <li><strong>ç›¸å…³æ¦‚å¿µ</strong>: <a href="/matt-blog/pages/rust/generics-and-traits.html">æ³›å‹ä¸ç‰¹å¾</a></li></ul> <hr> <p><a href="/matt-blog/pages/rust/" class="router-link-active">è¿”å›ç´¢å¼•</a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/matt-blog/pages/rust/basic-syntax.html" class="prev">
        Rust åŸºç¡€è¯­æ³•
      </a></span> <span class="next"><a href="/matt-blog/pages/rust/data-structures.html">
        æ•°æ®ç»“æ„
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matt-blog/assets/js/app.25e0c05f.js" defer></script><script src="/matt-blog/assets/js/2.778bb4ad.js" defer></script><script src="/matt-blog/assets/js/1.f8bb34da.js" defer></script><script src="/matt-blog/assets/js/43.fc442923.js" defer></script>
  </body>
</html>
