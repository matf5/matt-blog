<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rust 工具与项目管理 | matt的前端之路</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/matt-blog/cainiao.jpg">
    <meta name="description" content="matt的前端之路">
    
    <link rel="preload" href="/matt-blog/assets/css/0.styles.67df34d8.css" as="style"><link rel="preload" href="/matt-blog/assets/js/app.79b11175.js" as="script"><link rel="preload" href="/matt-blog/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/matt-blog/assets/js/1.f8bb34da.js" as="script"><link rel="preload" href="/matt-blog/assets/js/46.96cfa6b0.js" as="script"><link rel="prefetch" href="/matt-blog/assets/js/10.fde088a2.js"><link rel="prefetch" href="/matt-blog/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/matt-blog/assets/js/12.27d4f152.js"><link rel="prefetch" href="/matt-blog/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/matt-blog/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/matt-blog/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/matt-blog/assets/js/16.85253907.js"><link rel="prefetch" href="/matt-blog/assets/js/17.c2838453.js"><link rel="prefetch" href="/matt-blog/assets/js/18.3256f17f.js"><link rel="prefetch" href="/matt-blog/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/matt-blog/assets/js/20.0d880388.js"><link rel="prefetch" href="/matt-blog/assets/js/21.33b300c9.js"><link rel="prefetch" href="/matt-blog/assets/js/22.52be2116.js"><link rel="prefetch" href="/matt-blog/assets/js/23.1f97f089.js"><link rel="prefetch" href="/matt-blog/assets/js/24.5594dcf8.js"><link rel="prefetch" href="/matt-blog/assets/js/25.46e0c150.js"><link rel="prefetch" href="/matt-blog/assets/js/26.3b0ad8e7.js"><link rel="prefetch" href="/matt-blog/assets/js/27.5661e60f.js"><link rel="prefetch" href="/matt-blog/assets/js/28.f1edd409.js"><link rel="prefetch" href="/matt-blog/assets/js/29.97ef6e41.js"><link rel="prefetch" href="/matt-blog/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/matt-blog/assets/js/30.85059c1e.js"><link rel="prefetch" href="/matt-blog/assets/js/31.decf9bc8.js"><link rel="prefetch" href="/matt-blog/assets/js/32.0d5a73e9.js"><link rel="prefetch" href="/matt-blog/assets/js/33.54821521.js"><link rel="prefetch" href="/matt-blog/assets/js/34.dd829f2c.js"><link rel="prefetch" href="/matt-blog/assets/js/35.90469d5e.js"><link rel="prefetch" href="/matt-blog/assets/js/36.4c504a84.js"><link rel="prefetch" href="/matt-blog/assets/js/37.3d5d023d.js"><link rel="prefetch" href="/matt-blog/assets/js/38.56ac2795.js"><link rel="prefetch" href="/matt-blog/assets/js/39.64e69626.js"><link rel="prefetch" href="/matt-blog/assets/js/4.45665f8a.js"><link rel="prefetch" href="/matt-blog/assets/js/40.2194fa50.js"><link rel="prefetch" href="/matt-blog/assets/js/41.71587332.js"><link rel="prefetch" href="/matt-blog/assets/js/42.ff9ead27.js"><link rel="prefetch" href="/matt-blog/assets/js/43.890be4da.js"><link rel="prefetch" href="/matt-blog/assets/js/44.ea1ab515.js"><link rel="prefetch" href="/matt-blog/assets/js/45.30b47881.js"><link rel="prefetch" href="/matt-blog/assets/js/47.07b3c76a.js"><link rel="prefetch" href="/matt-blog/assets/js/48.f99a4972.js"><link rel="prefetch" href="/matt-blog/assets/js/49.4e0abe6d.js"><link rel="prefetch" href="/matt-blog/assets/js/5.7098d77a.js"><link rel="prefetch" href="/matt-blog/assets/js/50.fb72f4dd.js"><link rel="prefetch" href="/matt-blog/assets/js/51.8aad19a2.js"><link rel="prefetch" href="/matt-blog/assets/js/52.3ec62400.js"><link rel="prefetch" href="/matt-blog/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/matt-blog/assets/js/7.6a854e57.js"><link rel="prefetch" href="/matt-blog/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/matt-blog/assets/css/0.styles.67df34d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matt-blog/" class="home-link router-link-active"><img src="/matt-blog/cainiao.jpg" alt="matt的前端之路" class="logo"> <span class="site-name can-hide">matt的前端之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hybrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mini-program</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>performance</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>qwik</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>rust</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matt-blog/pages/rust/" aria-current="page" class="sidebar-link">Rust 学习之路</a></li><li><a href="/matt-blog/pages/rust/basic-syntax.html" class="sidebar-link">Rust 基础语法</a></li><li><a href="/matt-blog/pages/rust/collections.html" class="sidebar-link">集合类型</a></li><li><a href="/matt-blog/pages/rust/data-structures.html" class="sidebar-link">数据结构</a></li><li><a href="/matt-blog/pages/rust/error-handling.html" class="sidebar-link">错误处理</a></li><li><a href="/matt-blog/pages/rust/functional-programming.html" class="sidebar-link">函数式编程</a></li><li><a href="/matt-blog/pages/rust/generics-and-traits.html" class="sidebar-link">泛型与特征</a></li><li><a href="/matt-blog/pages/rust/ownership.html" class="sidebar-link">所有权系统</a></li><li><a href="/matt-blog/pages/rust/smart-pointers.html" class="sidebar-link">智能指针</a></li><li><a href="/matt-blog/pages/rust/tools-and-project.html" aria-current="page" class="active sidebar-link">工具与项目管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#📋-本章内容" class="sidebar-link">📋 本章内容</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#cargo-包管理器" class="sidebar-link">Cargo 包管理器</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#项目结构" class="sidebar-link">项目结构</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#模块系统" class="sidebar-link">模块系统</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#文档生成" class="sidebar-link">文档生成</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#工作空间" class="sidebar-link">工作空间</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#💡-最佳实践" class="sidebar-link">💡 最佳实践</a></li><li class="sidebar-sub-header"><a href="/matt-blog/pages/rust/tools-and-project.html#🔗-相关链接" class="sidebar-link">🔗 相关链接</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>xiaochengxu</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rust-工具与项目管理"><a href="#rust-工具与项目管理" class="header-anchor">#</a> Rust 工具与项目管理</h1> <p>Rust 提供了强大的工具链来管理项目、依赖和构建过程。</p> <h2 id="📋-本章内容"><a href="#📋-本章内容" class="header-anchor">#</a> 📋 本章内容</h2> <ul><li><a href="#cargo-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8">Cargo 包管理器</a></li> <li><a href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">项目结构</a></li> <li><a href="#%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F">模块系统</a></li> <li><a href="#%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90">文档生成</a></li></ul> <h2 id="cargo-包管理器"><a href="#cargo-包管理器" class="header-anchor">#</a> Cargo 包管理器</h2> <p>Cargo 是 Rust 的构建工具和包管理器，负责构建、测试、管理依赖等任务。</p> <h3 id="基本命令"><a href="#基本命令" class="header-anchor">#</a> 基本命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 创建新项目</span>
<span class="token function">cargo</span> new my_project
<span class="token function">cargo</span> new my_project <span class="token parameter variable">--lib</span>  <span class="token comment"># 创建库项目</span>

<span class="token comment"># 构建项目</span>
<span class="token function">cargo</span> build           <span class="token comment"># 调试构建</span>
<span class="token function">cargo</span> build <span class="token parameter variable">--release</span> <span class="token comment"># 发布构建</span>

<span class="token comment"># 运行项目</span>
<span class="token function">cargo</span> run

<span class="token comment"># 检查代码</span>
<span class="token function">cargo</span> check

<span class="token comment"># 运行测试</span>
<span class="token function">cargo</span> <span class="token builtin class-name">test</span>

<span class="token comment"># 更新依赖</span>
<span class="token function">cargo</span> update

<span class="token comment"># 清理构建产物</span>
<span class="token function">cargo</span> clean
</code></pre></div><h3 id="cargo-toml-配置"><a href="#cargo-toml-配置" class="header-anchor">#</a> Cargo.toml 配置</h3> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;my_project&quot;</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.1.0&quot;</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">&quot;2021&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">serde</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span>
<span class="token key property">tokio</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;full&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token table class-name">dev-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">proptest</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">build-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">cc</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0&quot;</span>
</code></pre></div><h3 id="cargo-lock-文件"><a href="#cargo-lock-文件" class="header-anchor">#</a> Cargo.lock 文件</h3> <p>Cargo.lock 文件用于锁定依赖版本：</p> <ol><li><strong>首次安装时</strong>: 自动使用当前大版本的最新版本</li> <li><strong>一旦 lock 存在</strong>: 后续每次都使用 lock 中的版本</li> <li><strong>需要更新</strong>: 可以用 <code>cargo update</code> 命令</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 更新所有依赖到最新版本</span>
<span class="token function">cargo</span> update

<span class="token comment"># 更新特定依赖</span>
<span class="token function">cargo</span> update <span class="token parameter variable">-p</span> serde
</code></pre></div><h2 id="项目结构"><a href="#项目结构" class="header-anchor">#</a> 项目结构</h2> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <ul><li><strong>包（Packages）</strong>: Cargo 的一个功能，它允许你构建、测试和分享 crate</li> <li><strong>Crates</strong>: 一个模块的树形结构，它形成了库或二进制项目</li> <li><strong>模块（Modules）</strong>: 允许你控制作用域和路径的私有性</li> <li><strong>路径（Path）</strong>: 一个命名例如结构体、函数或模块等项的方式</li></ul> <h3 id="包的组织规则"><a href="#包的组织规则" class="header-anchor">#</a> 包的组织规则</h3> <ul><li>一个包中<strong>至多只能</strong>包含一个库 crate</li> <li>包中可以包含<strong>任意多个</strong>二进制 crate</li> <li>包中<strong>至少包含一个</strong> crate，无论是库的还是二进制的</li></ul> <h3 id="标准项目结构"><a href="#标准项目结构" class="header-anchor">#</a> 标准项目结构</h3> <div class="language- extra-class"><pre class="language-text"><code>my_project/
├── Cargo.toml
├── Cargo.lock
├── src/
│   ├── main.rs          # 默认二进制 crate 根
│   ├── lib.rs           # 库 crate 根
│   └── bin/
│       ├── named-executable.rs
│       └── another-executable.rs
├── tests/
│   └── integration_test.rs
├── examples/
│   └── example.rs
└── benches/
    └── benchmark.rs
</code></pre></div><h4 id="二进制项目"><a href="#二进制项目" class="header-anchor">#</a> 二进制项目</h4> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// src/main.rs - 单个二进制文件</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// src/bin/my_tool.rs - 多个二进制文件</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;This is my tool!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="库项目"><a href="#库项目" class="header-anchor">#</a> 库项目</h4> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// src/lib.rs - 库的根模块</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{</span>
    a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token keyword">super</span><span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[test]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">test_add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="模块系统"><a href="#模块系统" class="header-anchor">#</a> 模块系统</h2> <h3 id="模块定义"><a href="#模块定义" class="header-anchor">#</a> 模块定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 内联模块</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">front_of_house</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">hosting</span> <span class="token punctuation">{</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">seat_at_table</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">mod</span> <span class="token module-declaration namespace">serving</span> <span class="token punctuation">{</span>
        <span class="token keyword">fn</span> <span class="token function-definition function">take_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">fn</span> <span class="token function-definition function">serve_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">fn</span> <span class="token function-definition function">take_payment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="文件模块"><a href="#文件模块" class="header-anchor">#</a> 文件模块</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// src/lib.rs</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">front_of_house</span><span class="token punctuation">;</span>  <span class="token comment">// 引用 src/front_of_house.rs 或 src/front_of_house/mod.rs</span>

<span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>front_of_house<span class="token punctuation">::</span></span>hosting<span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">eat_at_restaurant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">hosting<span class="token punctuation">::</span></span><span class="token function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// src/front_of_house.rs</span>
<span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">hosting</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="路径系统"><a href="#路径系统" class="header-anchor">#</a> 路径系统</h3> <h4 id="绝对路径"><a href="#绝对路径" class="header-anchor">#</a> 绝对路径</h4> <p>从 crate 根部开始，以 crate 名或者字面量 <code>crate</code> 开头：</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">front_of_house</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">hosting</span> <span class="token punctuation">{</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">eat_at_restaurant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 绝对路径</span>
    <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>front_of_house<span class="token punctuation">::</span>hosting<span class="token punctuation">::</span></span><span class="token function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="相对路径"><a href="#相对路径" class="header-anchor">#</a> 相对路径</h4> <p>从当前模块开始，以 <code>self</code>、<code>super</code> 或当前模块的标识符开头：</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">serve_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">mod</span> <span class="token module-declaration namespace">back_of_house</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">fix_incorrect_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">cook_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>serve_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用 super 访问父模块</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">fn</span> <span class="token function-definition function">cook_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="use-关键字"><a href="#use-关键字" class="header-anchor">#</a> use 关键字</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">front_of_house</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">hosting</span> <span class="token punctuation">{</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>front_of_house<span class="token punctuation">::</span></span>hosting<span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">eat_at_restaurant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">hosting<span class="token punctuation">::</span></span><span class="token function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="嵌套路径"><a href="#嵌套路径" class="header-anchor">#</a> 嵌套路径</h4> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 原始写法</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>cmp<span class="token punctuation">::</span></span><span class="token class-name">Ordering</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span>io<span class="token punctuation">;</span>

<span class="token comment">// 简化写法</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">cmp<span class="token punctuation">::</span></span><span class="token class-name">Ordering</span><span class="token punctuation">,</span> io<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 引入父模块和子模块</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">Write</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="重导出"><a href="#重导出" class="header-anchor">#</a> 重导出</h4> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">front_of_house</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">hosting</span> <span class="token punctuation">{</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>front_of_house<span class="token punctuation">::</span></span>hosting<span class="token punctuation">;</span>  <span class="token comment">// 重导出</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">eat_at_restaurant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">hosting<span class="token punctuation">::</span></span><span class="token function">add_to_waitlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="可见性规则"><a href="#可见性规则" class="header-anchor">#</a> 可见性规则</h3> <ul><li>模块内的所有项默认是私有的</li> <li>使用 <code>pub</code> 关键字使项公开</li> <li>父模块不能访问子模块中的私有项</li> <li>子模块可以访问祖先模块中的私有项</li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> <span class="token module-declaration namespace">outer_mod</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">inner_mod</span> <span class="token punctuation">{</span>
        <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">inner_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
        <span class="token keyword">fn</span> <span class="token function-definition function">private_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">outer_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token namespace">inner_mod<span class="token punctuation">::</span></span><span class="token function">inner_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ✓ 可以访问</span>
        <span class="token comment">// inner_mod::private_function(); // ✗ 不能访问私有函数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="文档生成"><a href="#文档生成" class="header-anchor">#</a> 文档生成</h2> <h3 id="查看文档"><a href="#查看文档" class="header-anchor">#</a> 查看文档</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 生成并打开文档</span>
<span class="token function">cargo</span> doc <span class="token parameter variable">--open</span>

<span class="token comment"># 生成文档但不打开</span>
<span class="token function">cargo</span> doc

<span class="token comment"># 包含私有项的文档</span>
<span class="token function">cargo</span> doc --document-private-items
</code></pre></div><h3 id="编写文档"><a href="#编写文档" class="header-anchor">#</a> 编写文档</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">/// 计算两个数的和</span>
<span class="token comment">/// </span>
<span class="token comment">/// # Examples</span>
<span class="token comment">/// </span>
<span class="token comment">/// ```</span>
<span class="token comment">/// let result = my_crate::add(2, 3);</span>
<span class="token comment">/// assert_eq!(result, 5);</span>
<span class="token comment">/// ```</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{</span>
    a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">/// 这个结构体表示一个用户</span>
<span class="token comment">/// </span>
<span class="token comment">/// # Fields</span>
<span class="token comment">/// </span>
<span class="token comment">/// * `name` - 用户的名称</span>
<span class="token comment">/// * `age` - 用户的年龄</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{</span>
    <span class="token comment">/// 用户名</span>
    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    <span class="token comment">/// 用户年龄</span>
    <span class="token keyword">pub</span> age<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token comment">/// 创建一个新的用户</span>
    <span class="token comment">/// </span>
    <span class="token comment">/// # Arguments</span>
    <span class="token comment">/// </span>
    <span class="token comment">/// * `name` - 用户名</span>
    <span class="token comment">/// * `age` - 用户年龄</span>
    <span class="token comment">/// </span>
    <span class="token comment">/// # Returns</span>
    <span class="token comment">/// </span>
    <span class="token comment">/// 返回一个新的 User 实例</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token keyword">u8</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="文档测试"><a href="#文档测试" class="header-anchor">#</a> 文档测试</h3> <p>文档中的代码示例会被自动测试：</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">/// 这个函数会被文档测试验证</span>
<span class="token comment">/// </span>
<span class="token comment">/// ```</span>
<span class="token comment">/// use my_crate::multiply;</span>
<span class="token comment">/// </span>
<span class="token comment">/// assert_eq!(multiply(2, 3), 6);</span>
<span class="token comment">/// ```</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">multiply</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{</span>
    a <span class="token operator">*</span> b
<span class="token punctuation">}</span>
</code></pre></div><h2 id="工作空间"><a href="#工作空间" class="header-anchor">#</a> 工作空间</h2> <p>当项目变大时，可以使用工作空间来管理多个相关的包：</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token comment"># Cargo.toml (工作空间根目录)</span>
<span class="token punctuation">[</span><span class="token table class-name">workspace</span><span class="token punctuation">]</span>
<span class="token key property">members</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;adder&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;add-one&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-toml extra-class"><pre class="language-toml"><code><span class="token comment"># adder/Cargo.toml</span>
<span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;adder&quot;</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.1.0&quot;</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">&quot;2021&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">add-one</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;../add-one&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="💡-最佳实践"><a href="#💡-最佳实践" class="header-anchor">#</a> 💡 最佳实践</h2> <ol><li><strong>模块组织</strong>: 按功能而非类型组织模块</li> <li><strong>命名约定</strong>: 使用 snake_case 命名函数和变量</li> <li><strong>文档编写</strong>: 为公共 API 编写详细文档</li> <li><strong>测试</strong>: 保持单元测试和集成测试的完整性</li> <li><strong>依赖管理</strong>: 定期更新依赖并检查安全漏洞</li></ol> <h2 id="🔗-相关链接"><a href="#🔗-相关链接" class="header-anchor">#</a> 🔗 相关链接</h2> <ul><li><strong>上一章</strong>: <a href="/matt-blog/pages/rust/basic-syntax.html">Rust 基础语法</a></li> <li><strong>下一章</strong>: <a href="/matt-blog/pages/rust/ownership.html">所有权系统</a></li> <li><strong>相关概念</strong>: <a href="/matt-blog/pages/rust/collections.html">集合类型</a></li></ul> <hr> <p><a href="/matt-blog/pages/rust/" class="router-link-active">返回索引</a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matt-blog/pages/rust/smart-pointers.html" class="prev">
        智能指针
      </a></span> <span class="next"><a href="/matt-blog/pages/vue/tsx-in-vue.html">
        tsx
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matt-blog/assets/js/app.79b11175.js" defer></script><script src="/matt-blog/assets/js/2.778bb4ad.js" defer></script><script src="/matt-blog/assets/js/1.f8bb34da.js" defer></script><script src="/matt-blog/assets/js/46.96cfa6b0.js" defer></script>
  </body>
</html>
